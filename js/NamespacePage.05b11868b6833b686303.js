"use strict";(self.webpackChunkbonfire=self.webpackChunkbonfire||[]).push([[301],{6178:(e,n,t)=>{t.r(n),t.d(n,{default:()=>w});var a=t(885),c=t(3264),o=t.n(c),l=t(6530),r=t(8788),s=t(6350),i=t(8716),u=t(9173),m=t(5697),p=t.n(m),f=t(4550),d=t(8931),E=t(5964),h=t(3215),v=function(e){var n=e.isOpen,t=e.onClose,l=e.namespace,s=(0,d.useDispatch)(),i=(0,c.useState)(!1),u=(0,a.Z)(i,2),m=u[0],p=u[1],f=(0,c.useState)("Applications"),v=(0,a.Z)(f,2),g=v[0],T=v[1],k=[o().createElement(r.DropdownItem,{key:"RBAC",onClick:function(){T("RBAC")}},"RBAC"),o().createElement(r.DropdownItem,{key:"Host Inventory",onClick:function(){T("Host Inventory")}},"Host Inventory"),o().createElement(r.DropdownItem,{key:"Engine",onClick:function(){T("Engine")}},"Engine")];return o().createElement(o().Fragment,null,o().createElement(r.Modal,{title:"Select App",variant:r.ModalVariant.small,isOpen:n,onClose:function(){t(),T("Applications")},actions:[o().createElement(r.Button,{key:"confirm",variant:"primary",onClick:function(){var e;t(),e="Now deploying ".concat(g," to ").concat(l),s((0,h.wN)({variant:"info",title:e,description:undefined})),T("Applications")}},"Confirm"),o().createElement(r.Button,{key:"cancel",variant:"link",onClick:function(){t(),T("Applications")}},"Cancel")]},o().createElement("div",null,"Use the dropdown menu to select which app you would like to deploy into the selected namespace."),o().createElement("div",null,o().createElement(r.Dropdown,{onSelect:function(){p(!1)},toggle:o().createElement(r.DropdownToggle,{id:"toggle-id-menu-body",onToggle:function(){p(!m)},toggleIndicator:E.ZP},g),isOpen:m,dropdownItems:k,menuAppendTo:"parent"}))))};v.propTypes={isOpen:p().bool,onClose:p().func,namespace:p().string};var g=function(e){var n=e.namespaceData,t=e.reloadData,l=(0,d.useDispatch)(),r=(0,c.useState)(null),s=(0,a.Z)(r,2),i=s[0],u=s[1],m=(0,c.useState)(!1),p=(0,a.Z)(m,2),E=p[0],g=p[1],T=function(e,n,t){l((0,h.wN)({variant:e,title:n,description:t}))};return o().createElement(o().Fragment,null,n&&o().createElement(f.Tbody,null,n.map((function(e){return o().createElement(f.Tr,{key:e.name},o().createElement(f.Td,null," ",e.name," "),o().createElement(f.Td,null," ",e.reserved.toString()," "),o().createElement(f.Td,null," ",e.status," "),o().createElement(f.Td,null," ",e.apps," "),o().createElement(f.Td,null," ",e.requester," "),o().createElement(f.Td,null," ",e.expires_in," "),o().createElement(f.Td,{actions:{items:(n=e.name,[{title:"Deploy Apps",onClick:function(){!function(e){u(e),g(!0)}(n)}},{title:"Extend",onClick:function(){!function(e){T("info","Extending the reservation for namespace ".concat(e)),fetch("/namespaces/".concat(e),{method:"PUT"}).then(setTimeout((function(){return t()}),2e3)).catch((function(e){return console.log(e)}))}(n)}},{title:"Release",onClick:function(){!function(e){T("info","Releasing the reservation for namespace ".concat(e)),fetch("/namespaces/".concat(e),{method:"DELETE"}).then(setTimeout((function(){return t()}),3e3)).catch((function(e){return console.log(e)}))}(n)}}]),disable:!e.reserved}}));var n}))),o().createElement(v,{isOpen:E,onClose:function(){g(!E)},namespace:i}))};const T=g;g.propTypes={namespaceData:p().array,reloadData:p().func};var k=function(e){var n=e.namespaces,t=(0,c.useState)(!0),l=(0,a.Z)(t,2),r=l[0],s=l[1],i=(0,c.useState)(n),u=(0,a.Z)(i,2),m=u[0],p=u[1];return o().createElement(o().Fragment,null,r&&m?o().createElement(f.TableComposable,{"aria-label":"Namespace table"},o().createElement(f.Thead,null,o().createElement(f.Tr,null,["Name","Reserved","Env Status","Apps Ready","Requester","Expires"].map((function(e){return o().createElement(f.Th,{key:e},e)})))),o().createElement(T,{namespaceData:m,reloadData:function(){s(!1),console.log("fetching data"),fetch("/namespaces").then((function(e){return e.json()})).then((function(e){console.log(e),p(e.namespaces),s(!0)})).catch((function(e){return console.log(e)}))}})):o().createElement("div",null," Gathering namespaces... "))};k.propTypes={namespaces:p().array};var y=function(e){var n=e.refresh,t=(0,d.useDispatch)(),a=function(e,n,a){t((0,h.wN)({variant:e,title:n,description:a}))};return o().createElement(r.Button,{onClick:function(){return a("info","Reserving an ephemeral namespace","A request to reserve a namespace has been dispatched"),void fetch("/namespaces",{method:"POST"}).then((function(e){return e.json()})).then((function(e){console.log(e),a("success","Reserved namespace ".concat(e.namespace)),n()})).catch((function(e){return console.log(e)}))}},"Reserve")};const C=y;y.propTypes={refresh:p().func};const w=(0,l.withRouter)((function(){var e=(0,c.useState)(!1),n=(0,a.Z)(e,2),t=n[0],l=n[1],m=(0,c.useState)(),p=(0,a.Z)(m,2),f=p[0],d=p[1];(0,c.useEffect)((function(){var e,n,t;null===(e=insights)||void 0===e||null===(n=e.chrome)||void 0===n||null===(t=n.appAction)||void 0===t||t.call(n,"namespace-page")}),[]),(0,c.useEffect)((function(){E()}),[]);var E=function(){console.log("fetching data"),fetch("/namespaces").then((function(e){return e.json()})).then((function(e){console.log(e),d(e.namespaces),l(!0)})).catch((function(e){return console.log(e)}))};return o().createElement(o().Fragment,null,o().createElement(i.Z,null,o().createElement(r.Level,null,o().createElement(r.LevelItem,null,o().createElement(u.Z,{title:"Ephemeral Namespaces"}),o().createElement("p",null," This is a proof of concept ")),o().createElement(r.LevelItem,null,o().createElement(C,{refresh:function(){console.log("refreshing namespace data"),l(!1),E()}})))),o().createElement(s.Z,null,o().createElement(r.Stack,{hasGutter:!0},o().createElement(r.StackItem,null,t?o().createElement(k,{namespaces:f}):o().createElement("div",null," Gathering namespaces... ")))))}))}}]);
//# sourceMappingURL=../sourcemaps/NamespacePage.0bef45d5c4f6f549004e3a892a8aeee8.js.map